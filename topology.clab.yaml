name: topology

topology:
  nodes:
    router1:
      kind: arista_ceos
      image: arista/ceos:4.32.0F
      startup-config: config/route1.cfg

    router2:
      kind: arista_ceos
      image: arista/ceos:4.32.0F
      startup-config: config/route2.cfg

    switch:
      kind: arista_ceos
      image: arista/ceos:4.32.0F
      startup-config: config/switch.cfg

    hostA:
      kind: linux
      image: alpine:latest
      exec:
        - ip addr add 192.168.10.10/24 dev eth1
        - ip route replace default via 192.168.10.1

    hostB:
      kind: linux
      image: alpine:latest
      exec:
        - ip addr add 192.168.20.10/24 dev eth1
        - ip route replace default via 192.168.20.1

    hostC:
      kind: linux
      image: alpine:latest
      exec:
        - ip addr add 192.168.30.10/24 dev eth1
        - ip route replace default via 192.168.30.1

  links:
    - endpoints: ["router1:eth1", "router2:eth1"]
    - endpoints: ["router2:eth2", "switch:eth1"]
    - endpoints: ["switch:eth3", "hostA:eth1"]
    - endpoints: ["switch:eth4", "hostB:eth1"]
    - endpoints: ["switch:eth5", "hostC:eth1"]